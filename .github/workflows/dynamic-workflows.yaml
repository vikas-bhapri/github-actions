name: Dynamic Matrix
on: 
    workflow_dispatch:
        inputs:
            os:
                description: Operating System
                default: "windows-latest, ubuntu-latest"
                type: string
            node_version:
                description: Node Version
                default: "14,15,16"
                type: string

jobs:
  prepare_matrix:
    runs-on: ubuntu-latest
    steps:
        - run: echo "step-output=value" >> $GITHUB_OUTPUT
          id: step-1
        - run: echo "step-output=value 2" >> $GITHUB_OUTPUT
          id: step-2
        - run: |
            echo ${{ steps.step-1.outputs.step-output }}
            echo ${{ steps.step-2.outputs.step-output }}

  node_matrix:
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest]
        node_version: [13,14,15]
    runs-on: ${{ matrix.os }}
    steps:
        - run: node -v
        - uses: actions/setup-node@v3
          with:
            node_version: ${{ matrix.node_version }}
        - run: node -v